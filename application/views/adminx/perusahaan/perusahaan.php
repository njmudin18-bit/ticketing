<!DOCTYPE html><html lang="en">  <head>    <meta charset="utf-8">    <meta http-equiv="X-UA-Compatible" content="IE=edge">    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">    <meta name="description" content="Ticketing Apps - <?php echo $perusahaan->nama; ?>">    <meta name="author" content="IT Department - <?php echo $perusahaan->nama; ?>">    <meta name="keywords" content="Ticketing Apps - <?php echo $perusahaan->nama; ?>">    <link rel="preconnect" href="https://fonts.gstatic.com/">    <link rel="shortcut icon" href="<?php echo base_url(); ?>upload/general_images/<?php echo $perusahaan->icon_name; ?>" />    <link rel="canonical" href="<?php echo base_url(); ?>" />    <title><?php echo $nama_halaman; ?> | <?php echo $perusahaan->nama; ?></title>    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&amp;display=swap" rel="stylesheet">    <!-- BEGIN SETTINGS -->    <!-- Remove this after purchasing -->    <link class="js-stylesheet" href="<?php echo base_url(); ?>assets/css/light.css" rel="stylesheet">    <link href="<?php echo base_url(); ?>assets/css/customs.css" rel="stylesheet">    <script src="<?php echo base_url(); ?>assets/js/settings.js"></script>    <style>      body {        opacity: 0;      }    </style>    <!-- END SETTINGS -->  </head>  <body data-theme="default" data-layout="fluid" data-sidebar-position="left" data-sidebar-layout="default">    <div class="wrapper">            <?php $this->load->view('adminx/components/sidebar'); ?>      <div class="main">        <?php $this->load->view('adminx/components/navbar'); ?>        <main class="content">          <div class="container-fluid p-0">            <div class="row">              <div class="col-12">                <div class="card table">                  <div class="card-header">                    <h5 class="card-title text-center">                      <?php echo $nama_halaman; ?>                      <span>                        <button type="button" class="btn btn-primary pull-right text-white" onclick="openModal();">                          <i class="align-middle me-1" data-feather="plus-circle"></i>                          TAMBAH                        </button>                      </span>                    </h5>                  </div>                  <div class="card-body">                    <div class="table-responsive">                      <table id="datatables-reponsive" class="table table-striped" width="380%">                        <thead>                          <tr class="bg-primary">                            <th class="text-white">No.</th>                            <th class="text-white">#</th>                            <th class="text-white">Aktivasi</th>                            <th class="text-white">Nama</th>                            <th class="text-white">Telepon</th>                            <th class="text-white">Handphone</th>                            <th class="text-white">Fax</th>                            <th class="text-white">Email</th>                            <th class="text-white">Alamat</th>                            <th class="text-white">Icon Name</th>                            <th class="text-white">Logo Name</th>                            <th class="text-white">Twitter</th>                            <th class="text-white">Facebook</th>                            <th class="text-white">Instagram</th>                            <th class="text-white">Pinterest</th>                            <th class="text-white">Youtube</th>                            <th class="text-white">Skype</th>                          </tr>                        </thead>                        <tbody></tbody>                      </table>                    </div>                  </div>                </div>              </div>            </div>          </div>        </main>        <?php $this->load->view('adminx/components/footer'); ?>      </div>    </div>    <!-- MODAL FORM -->    <div class="modal fade" id="modalForm" tabindex="-1" role="dialog" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">      <div class="modal-dialog" role="document">        <div class="modal-content">          <div class="modal-header">            <h5 class="modal-title">Default modal</h5>            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>          </div>          <div class="modal-body">            <form action="" method="post" id="registerForm" enctype="multipart/form-data">              <input type="hidden" value="" name="kode" >              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Nama Perusahaan</label>                <div class="col-sm-9">                  <input type="text" class="form-control" id="nama" name="nama" placeholder="Nama Perusahaan">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Aktivasi</label>                <div class="col-sm-9">                  <select id="aktivasi" name="aktivasi" class="form-select">                    <option selected="selected" disabled="disabled">-- Pilih --</option>                    <option value="Aktif">AKTIF</option>                    <option value="Tidak">TIDAK</option>                  </select>                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Telepon</label>                <div class="col-sm-9">                  <input type="text" class="form-control" id="telepon" name="telepon" placeholder="Nomor Telepon">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Handphone</label>                <div class="col-sm-9">                  <input type="text" class="form-control" id="handphone" name="handphone" placeholder="Nomor Handphone">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Fax</label>                <div class="col-sm-9">                  <input type="text" class="form-control" id="fax" name="fax" placeholder="Nomor Fax">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Email</label>                <div class="col-sm-9">                  <input type="email" class="form-control" id="email" name="email" placeholder="Alamat Email">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Alamat</label>                <div class="col-sm-9">                  <input type="text" class="form-control" id="alamat" name="alamat" placeholder="Alamat Perusahaan">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Maps</label>                <div class="col-sm-9">                  <textarea id="maps" name="maps" class="form-control" placeholder="Alamat Maps" rows="5"></textarea>                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Twitter</label>                <div class="col-sm-9">                  <input type="email" class="form-control" id="twitter" name="twitter" placeholder="Link Twitter">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Facebook</label>                <div class="col-sm-9">                  <input type="email" class="form-control" id="facebook" name="facebook" placeholder="Link Facebook">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Instagram</label>                <div class="col-sm-9">                  <input type="email" class="form-control" id="instagram" name="instagram" placeholder="Link Instagram">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Pinterest</label>                <div class="col-sm-9">                  <input type="email" class="form-control" id="pinterest" name="pinterest" placeholder="Link Pinterest">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Youtube</label>                <div class="col-sm-9">                  <input type="email" class="form-control" id="youtube" name="youtube" placeholder="Link Youtube">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Skype</label>                <div class="col-sm-9">                  <input type="email" class="form-control" id="skype" name="skype" placeholder="Link Skype">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Logo Perusahaan</label>                <div class="col-sm-9">                  <input type="file" id="file" name="file" class="form-control" required="required">                  <span class="help-block"></span>                </div>              </div>              <div id="image_preview" class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Preview</label>                <div class="col-sm-9">                  <img id="prevew_box" src="<?php echo base_url(); ?>assets/images/not_founds/not-found.jpg" alt="post-img" class="rounded me-1" height="auto" width="120">                </div>              </div>            </form>          </div>          <div class="modal-footer">            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>            <button type="button" id="btnSave" class="btn btn-primary" onclick="save();">Save</button>          </div>        </div>      </div>    </div>    <!-- MODAL FORM END -->    <!-- MODAL UPLOAD ICON -->    <div class="modal fade" id="modal_upload_icon" tabindex="-1" role="dialog" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">      <div class="modal-dialog" role="document">        <div class="modal-content">          <div class="modal-header">            <h5 class="modal-title">Upload icon</h5>            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>          </div>          <div class="modal-body">            <form action="" method="post" id="iconForm" enctype="multipart/form-data">              <input type="hidden" value="" name="kode_perusahaan" >              <div class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Icon Perusahaan</label>                <div class="col-sm-9">                  <input type="file" id="file_icon" name="file_icon" class="form-control" required="required">                  <span class="help-block"></span>                </div>              </div>              <div id="image_preview_icon" class="form-group row mb-3">                <label class="col-sm-3 col-form-label">Preview</label>                <div class="col-sm-9">                  <img id="prevew_box_icon" src="<?php echo base_url(); ?>assets/images/not_founds/not-found.jpg" alt="post-img" class="rounded me-1" height="auto" width="120">                </div>              </div>            </form>          </div>          <div class="modal-footer">            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="reset();">Close</button>            <button type="button" id="btnSave" class="btn btn-primary" onclick="save_icon();">Save</button>          </div>        </div>      </div>    </div>    <!-- MODAL UPLOAD ICON END -->    <script src="<?php echo base_url(); ?>assets/js/app.js"></script>    <script src="<?php echo base_url(); ?>assets/js/datatables.js"></script>    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>    <script>      var save_method;      var url      //FUNCTION OPEN MODAL CABANG      function openModal() {        save_method = 'add';        $("#pass_div").show();        $('#btnSave').text('Save');        $('#registerForm')[0].reset();        $('.form-group').find(".has-error").removeClass("has-error");        $('.help-block').empty();        $('#modalForm').modal('show');        $('.modal-title').text('Tambah Perusahaan');        $('#image_preview').hide();      }      //FUNCTION CLOSE MODAL      function closeModal(){        $('#registerForm')[0].reset();        $('#modalForm').modal('hide');        $('.modal-title').text('Tambah Perusahaan');      }      //FUNCTION RESET      function reset() {        $('#registerForm')[0].reset();        $('.modal-title').text('Tambah Perusahaan');      }      //FUNCTION RELOAD TABLE      function reload_table(){        table.ajax.reload(null,false);      }      //VALIDATION AND ADD USER      function save()      {        $("#btnSave").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Saving...');        $("#btnSave").attr('disabled', true);        var url;        if(save_method == 'add') {          url = "<?php echo base_url(); ?>perusahaan/perusahaan_add";        } else {          url = "<?php echo base_url(); ?>perusahaan/perusahaan_update";        }                var form      = $('#registerForm')[0];        var form_data = new FormData(form);        $.ajax({            url: url,            dataType: 'JSON',             cache: false,            contentType: false,            processData: false,            data: form_data,            type: 'POST',            beforeSend: function (response) {            },            success: function(data)            {              if(data.status == 'ok')              {                $('#modalForm').modal('hide');                reload_table();              } else if (data.status == 'forbidden') {                Swal.fire(                  'FORBIDDEN',                  'Access Denied',                  'info',                )              } else {                for (var i = 0; i < data.inputerror.length; i++)                 {                    $                    $('[name="'+data.inputerror[i]+'"]').parent().addClass('has-error');                    $('[name="'+data.inputerror[i]+'"]').next().text(data.error_string[i]);                }              }              $('#btnSave').text('Save');              $('#btnSave').attr('disabled',false);            },            error: function (jqXHR, textStatus, errorThrown)            {              alert('Error adding / update data');              $('#btnSave').text('Save');              $('#btnSave').attr('disabled',false);            }        });      };      //SAVE ICON      function save_icon() {        var cek_file = document.getElementById("file_icon");        if (document.getElementById("file_icon").files.length == 0) {          alert("File harus diisi!");          $("#file").focus();        } else {          var form      = $('#iconForm')[0];          var form_data = new FormData(form);          // ajax adding data to database          $.ajax({            url: '<?php echo base_url(); ?>perusahaan/upload_icon',            dataType: 'JSON',            cache: false,            contentType: false,            processData: false,            data: form_data,            type: 'POST',            beforeSend: function (response) {              $("#btn_save_icon").prop('disabled', true);              $("#btn_save_icon").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>');            },            success: function (data) {              if(data.status == 'ok') //if success close modal and reload ajax table              {                $('#modal_upload_icon').modal('hide');                reload_table();              } else {                alert("error when upload");              }              $('#btn_save_icon').text('Save');              $('#btn_save_icon').attr('disabled', false);            },            error: function (response) {              alert('Error adding / update data');              $('#btn_save_icon').text('Save');              $('#btn_save_icon').attr('disabled', false);            }          });        }      }      //FUNCTION UPLOAD ICON      function openModalUpload(id) {        save_method = 'update';        $('#iconForm')[0].reset();        $('.form-group').removeClass('has-error');        $('.help-block').empty();        //Ajax Load data from ajax        $.ajax({            url : "<?php echo base_url(); ?>perusahaan/perusahaan_edit/" + id,            type: "GET",            dataType: "JSON",            beforeSend: function (response) {              $("#btn_save_icon").prop('disabled', true);              $("#btn_save_icon").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>');            },            success: function(data)            {              $('[name="kode_perusahaan"]').val(data.id);              $('#modal_upload_icon').modal('show');              $('#btn_save_icon').attr('disabled', false);              const icon = data.icon_name;              if (icon == '' || icon == null) {                $('.modal-title').text('Tambah Icon Perusahaan');                $('#btn_save_icon').text('Save');                $('#image_preview_icon').hide();              } else {                $('.modal-title').text('Edit Icon Perusahaan');                $('#btn_save_icon').text('Update');                var imgs = '<?php echo base_url(); ?>upload/general_images/' + icon;                $("#prevew_box_icon").attr("src", imgs);                $('#image_preview_icon').show();              }            },            error: function (jqXHR, textStatus, errorThrown)            {              alert('Error get data from ajax');            }        });      }      //FUNCTION EDIT      function edit(id) {        save_method = 'update';        $('#registerForm')[0].reset();        $('.form-group').removeClass('has-error');        $('.help-block').empty();        $('#image_preview').show();        //Ajax Load data from ajax        $.ajax({            url : "<?php echo base_url(); ?>perusahaan/perusahaan_edit/" + id,            type: "GET",            dataType: "JSON",            success: function(data)            {              if (data.status == 'forbidden') {                Swal.fire(                  'FORBIDDEN',                  'Access Denied',                  'info',                )              } else {                $('[name="kode"]').val(data.id);                $('[name="aktivasi"]').val(data.aktivasi);                $('[name="nama"]').val(data.nama);                $('[name="telepon"]').val(data.telepon);                $('[name="handphone"]').val(data.handphone);                $('[name="fax"]').val(data.fax);                $('[name="email"]').val(data.email);                $('[name="alamat"]').val(data.alamat);                $('[name="maps"]').val(data.maps);                $('[name="twitter"]').val(data.twitter);                $('[name="facebook"]').val(data.facebook);                $('[name="instagram"]').val(data.instagram);                $('[name="pinterest"]').val(data.pinterest);                $('[name="youtube"]').val(data.youtube);                $('[name="skype"]').val(data.skype);                var imgs = '<?php echo base_url(); ?>upload/general_images/' + data.logo_name;                $("#prevew_box").attr("src", imgs);                                $('#modalForm').modal('show');                $('.modal-title').text('Edit Perusahaan');                $('#btnSave').text('Update');              }            },            error: function (jqXHR, textStatus, errorThrown)            {              alert('Error get data from ajax');            }        });      }      //FUNCTION HAPUS      function openModalDelete(id) {      	Swal.fire({				  title: 'Apakah anda yakin?',				  text: "Data yang dihapus tidak bisa dikembalikan!",				  icon: 'warning',				  showCancelButton: true,				  confirmButtonColor: '#3085d6',				  cancelButtonColor: '#d33',				  confirmButtonText: 'Yes, hapus',				  cancelButtonText: 'Tidak, Batal'				}).then((result) => {				  if (result.isConfirmed) {				    $.ajax({              url: '<?php echo base_url(); ?>perusahaan/perusahaan_deleted/' + id,              type: 'DELETE',              error: function() {                alert('Something is wrong');              },              success: function(data) {                var result = JSON.parse(data);                if (result.status == 'forbidden'){                  Swal.fire(                    'FORBIDDEN',                    'Access Denied',                    'info',                  )                } else {                  $("#"+id).remove();                  reload_table();                }              }            });				  }				})      }      document.addEventListener("DOMContentLoaded", function(event) {        $('#image_preview').hide();        table = $('#datatables-reponsive').DataTable({ 	      		"pagingType": "full_numbers",	      		"lengthMenu": [		          [10, 25, 50, -1],		          [10, 25, 50, "All"]		        ],		        responsive: false,		        language: {		          search: "_INPUT_",		          searchPlaceholder: "Search records",		        },            "processing": true, //Feature control the processing indicator.            "serverSide": true, //Feature control DataTables' server-side processing mode.            "order": [], //Initial no order.            // Load data for the table's content from an Ajax source            "ajax": {              "url": "<?php echo base_url(); ?>perusahaan/perusahaan_list",              "type": "POST",            },            "aoColumns": [              { "No": "No" , "sClass": "text-right"},              { "#": "#" , "sClass": "text-center" },              { "Aktivasi": "Aktivasi" , "sClass": "text-center" },              { "Nama": "Nama" , "sClass": "text-left" },              { "Telepon": "Telepon" , "sClass": "text-left" },              { "Handphone": "Handphone" , "sClass": "text-left" },              { "Fax": "Fax" , "sClass": "text-left" },              { "Email": "Email" , "sClass": "text-left" },              { "Alamat": "Alamat" , "sClass": "text-left" },              { "Icon Name": "Icon Name" , "sClass": "text-left" },              { "Logo Name": "Logo Name" , "sClass": "text-left" },              { "Twitter": "Twitter" , "sClass": "text-left" },              { "Facebook": "Facebook" , "sClass": "text-left" },              { "Instagram": "Instagram" , "sClass": "text-left" },              { "Pinterest": "Pinterest" , "sClass": "text-left" },              { "Youtube": "Youtube" , "sClass": "text-left" },              { "Skype": "Skype" , "sClass": "text-left" }            ]        });        $("#nama").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#aktivasi").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#telepon").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#handphone").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#fax").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#email").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#alamat").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        });    </script>  </body></html>