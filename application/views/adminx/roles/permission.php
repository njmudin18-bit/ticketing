<!DOCTYPE html><html lang="en">  <head>    <meta charset="utf-8">    <meta http-equiv="X-UA-Compatible" content="IE=edge">    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">    <meta name="description" content="Ticketing Apps - <?php echo $perusahaan->nama; ?>">    <meta name="author" content="IT Department - <?php echo $perusahaan->nama; ?>">    <meta name="keywords" content="Ticketing Apps - <?php echo $perusahaan->nama; ?>">    <link rel="preconnect" href="https://fonts.gstatic.com/">    <link rel="shortcut icon" href="<?php echo base_url(); ?>upload/general_images/<?php echo $perusahaan->icon_name; ?>" />    <link rel="canonical" href="<?php echo base_url(); ?>" />    <title><?php echo $nama_halaman; ?> | <?php echo $perusahaan->nama; ?></title>    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&amp;display=swap" rel="stylesheet">    <!-- BEGIN SETTINGS -->    <!-- Remove this after purchasing -->    <link class="js-stylesheet" href="<?php echo base_url(); ?>assets/css/light.css" rel="stylesheet">    <link href="<?php echo base_url(); ?>assets/css/customs.css" rel="stylesheet">    <script src="<?php echo base_url(); ?>assets/js/settings.js"></script>    <style>      body {        opacity: 0;      }    </style>    <!-- END SETTINGS -->  </head>  <body data-theme="default" data-layout="fluid" data-sidebar-position="left" data-sidebar-layout="default">    <div class="wrapper">            <?php $this->load->view('adminx/components/sidebar'); ?>      <div class="main">        <?php $this->load->view('adminx/components/navbar'); ?>        <main class="content">          <div class="container-fluid p-0">            <div class="row">              <div class="col-12">                <div class="card table">                  <div class="card-header">                    <h5 class="card-title text-center">                      <?php echo $nama_halaman; ?>                      <span>                        <button type="button" class="btn btn-primary pull-right text-white" onclick="openModal();">                          <i class="align-middle me-1" data-feather="plus-circle"></i>                          TAMBAH                        </button>                      </span>                    </h5>                  </div>                  <div class="card-body">                    <div class="table-responsive">                      <table id="datatables-reponsive" class="table table-striped" width="135%">                        <thead>                          <tr class="bg-primary">                            <th class="text-center text-white" width="7%">No</th>                            <th class="text-center text-white" width="10%">#</th>                            <th class="text-center text-white">Permissions Group</th>                            <th class="text-center text-white">Display Name</th>                            <th class="text-center text-white">Code</th>                            <th class="text-center text-white">Type</th>                            <th class="text-center text-white">Status</th>                          </tr>                        </thead>                        <tbody></tbody>                      </table>                    </div>                  </div>                </div>              </div>            </div>          </div>        </main>        <?php $this->load->view('adminx/components/footer'); ?>      </div>    </div>        <!-- MODAL FORM -->    <div class="modal fade" id="modalForm" tabindex="-1" role="dialog" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">      <div class="modal-dialog" role="document">        <div class="modal-content">          <div class="modal-header">            <h5 class="modal-title">Default modal</h5>            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>          </div>          <div class="modal-body">            <form action="" method="post" id="registerForm">              <input type="hidden" value="" name="kode" >              <div class="form-group row mb-3">                <label class="col-sm-4 col-form-label">Permissions Group</label>                <div class="col-sm-8">                  <select id="idpermissions_group" name="idpermissions_group" class="form-select">                    <option selected="selected" disabled="disabled">-- Pilih --</option>                    <?php foreach ($group as $key => $value): ?>                      <option value="<?php echo $value->idpermissions_group; ?>"><?php echo $value->permissions_groupname; ?></option>                    <?php endforeach ?>                  </select>                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-4 col-form-label">Controller</label>                <div class="col-sm-8">                  <input type="text" id="code_class" name="code_class" class="form-control" required="required" autocomplete="off">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-4 col-form-label">Function</label>                <div class="col-sm-8">                  <input type="text" id="code_method" name="code_method" class="form-control" required="required" autocomplete="off">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-4 col-form-label">URL</label>                <div class="col-sm-8">                  <input type="text" id="code_url" name="code_url" class="form-control" required="required" autocomplete="off">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-4 col-form-label">Display Name</label>                <div class="col-sm-8">                  <input type="text" id="display_name" name="display_name" class="form-control" required="required" autocomplete="off">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-4 col-form-label">Display Icon</label>                <div class="col-sm-8">                  <input type="text" id="display_icon" name="display_icon" class="form-control" required="required" autocomplete="off">                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-4 col-form-label">Type</label>                <div class="col-sm-8">                  <select id="type" name="type" class="form-select" required="required">                    <option selected="selected" disabled="disabled">-- Pilih --</option>                    <option value="TRUE">Sidebar</option>                    <option value="NAV">Navbar</option>                    <option value="FALSE">Function</option>                  </select>                  <span class="help-block"></span>                </div>              </div>              <div class="form-group row mb-3">                <label class="col-sm-4 col-form-label">Status</label>                <div class="col-sm-8">                  <select id="status" name="status" class="form-select" required="required">                    <option selected="selected" disabled="disabled">-- Pilih --</option>                    <option value="1">AKTIF</option>                    <option value="0">NON-AKTIF</option>                  </select>                  <span class="help-block"></span>                </div>              </div>            </form>          </div>          <div class="modal-footer">            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>            <button type="button" id="btnSave" class="btn btn-primary" onclick="save();">Save</button>          </div>        </div>      </div>    </div>    <!-- MODAL FORM END -->    <script src="<?php echo base_url(); ?>assets/js/app.js"></script>    <script src="<?php echo base_url(); ?>assets/js/datatables.js"></script>    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>    <script>      var save_method;      var url      //FUNCTION OPEN MODAL CABANG      function openModal() {        save_method = 'add';        $("#pass_div").show();        $('#btnSave').text('Save');        $('#registerForm')[0].reset();        $('.form-group').find(".has-error").removeClass("has-error");        $('.help-block').empty();        $('#modalForm').modal('show');        $('.modal-title').text('Tambah Permissions');      };      //FUNCTION CLOSE MODAL      function closeModal(){        $('#registerForm')[0].reset();        $('#modalForm').modal('hide');        $('.modal-title').text('Tambah Permissions');      };      //FUNCTION RESET      function reset() {        $('#registerForm')[0].reset();        $('.modal-title').text('Tambah Permissions');      };      //FUNCTION RELOAD TABLE      function reload_table(){        table.ajax.reload(null,false);      };      //VALIDATION AND ADD USER      function save()      {        $("#btnSave").html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Saving...');        $("#btnSave").attr('disabled', true);        var url;        if(save_method == 'add') {          $("#pass_div").show();          url = "<?php echo base_url(); ?>permission/permission_add";        } else {          $("#pass_div").hide();          url = "<?php echo base_url(); ?>permission/permission_update";        }                var data_save = $('#registerForm').serializeArray();        $.ajax({            url : url,            type: "POST",            data: data_save,            dataType: "JSON",            success: function(data)            {              if(data.status == 'ok')              {                $('#modalForm').modal('hide');                reload_table();              } else if (data.status == 'forbidden') {                Swal.fire(                  'FORBIDDEN',                  'Access Denied',                  'info',                )              } else {                for (var i = 0; i < data.inputerror.length; i++)                 {                    $                    $('[name="'+data.inputerror[i]+'"]').parent().addClass('has-error');                    $('[name="'+data.inputerror[i]+'"]').next().text(data.error_string[i]);                }              }              $('#btnSave').text('Save');              $('#btnSave').attr('disabled',false);            },            error: function (jqXHR, textStatus, errorThrown)            {              alert('Error adding / update data');              $('#btnSave').text('Save');              $('#btnSave').attr('disabled',false);            }        });      };      //FUNCTION EDIT      function edit(id) {        save_method = 'update';        $('#registerForm')[0].reset();        $('.form-group').removeClass('has-error');        $(".form-group>div").removeClass("has-error");        $('.help-block').empty();        //Ajax Load data from ajax        $.ajax({          url : "<?php echo base_url(); ?>permission/permission_edit/" + id,          type: "GET",          dataType: "JSON",          success: function(data)          {            if (data.status == 'forbidden'){              Swal.fire(                'FORBIDDEN',                'Access Denied',                'info',              )            } else {              $('[name="kode"]').val(data.idpermissions);              $('[name="idpermissions_group"]').val(data.idpermissions_group);              $('[name="code_class"]').val(data.code_class);              $('[name="code_method"]').val(data.code_method);              $('[name="code_url"]').val(data.code_url);              $('[name="display_name"]').val(data.display_name);              $('[name="display_icon"]').val(data.display_icon);              $('[name="type"]').val(data.type);              $('[name="status"]').val(data.status);              $('#modalForm').modal('show');              $('.modal-title').text('Edit Permissions');              $('#btnSave').text('Update');            }                      },          error: function (jqXHR, textStatus, errorThrown)          {            alert('Error get data from ajax');          }        });      };      document.addEventListener("DOMContentLoaded", function(event) {        table = $('#datatables-reponsive').DataTable({ 	      		"pagingType": "full_numbers",	      		"lengthMenu": [		          [10, 25, 50, -1],		          [10, 25, 50, "All"]		        ],		        responsive: false,		        language: {		          search: "_INPUT_",		          searchPlaceholder: "Search records",		        },            "processing": true,            "serverSide": true,            "order": [],            "ajax": {              "url": "<?php echo base_url(); ?>permission/permission_list",              "type": "POST",            },            "aoColumns": [              { "No": "No" , "sClass": "text-right"},              { "#": "#" , "sClass": "text-center" },              { "Permissions Group": "Permissions Group" , "sClass": "text-left" },              { "Display Name": "Display Name" , "sClass": "text-left" },              { "Code": "Code" , "sClass": "text-left" },              { "Type": "Type" , "sClass": "text-center" },              { "Status": "Status" , "sClass": "text-center" }            ],            "columnDefs": [              {                 "targets": [ 0 ],                "orderable": false,                className: 'text-right'              },            ]        });        $("#idpermissions_group").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });	      $("#code_class").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#code_method").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#code_url").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#display_name").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#display_icon").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#code_url").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#type").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });        $("#status").change(function(){          $(this).parent().removeClass('has-error');          $(this).next().empty();        });       });    </script>  </body></html>